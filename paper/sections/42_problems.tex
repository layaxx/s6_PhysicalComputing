\subsection{Known Problems}

The following sections discusses some of the problems I faced, and solutions or mitigations I employed.

%\paragraph{Distances >= 2m}
%Distances of 2 meters or above are sometimes recognized as 1m. I do not know why this is, and it mostly works again after a reset. 16 Bit Clock time of arduino should allow for distances of up to about 5.5 meters, which is well above the maximum distance of the ultrasonic sensor, which is 4 meters.

\paragraph{Incorrect Ultrasonic Measurements during \IIC communication}
The Ultrasonic measurement received immediately after Gyroscope reading is off
by a lot, see Figure \ref{fig:log}.
This may be due to interrupts not working properly when \IIC communication is happening, but I am not sure.
Impact depends on the range of measurement. Section \ref{subsec:benchmark} shows that the update frequency of the ultrasonic is significantly higher than the gyroscope. Even at 2 meters distance, it is more than twice as high, which guarantees correct values even if affected values are omitted.
Potential mitigation strategies are omitting the ultrasonic value that is received just after a gyroscope value, or replacing this value with the average of its predecessor and successor.

\begin{figure}


    \begin{minipage}{\textwidth}
        \begin{verbatim}
    Ultrasonic: 2450
    Ultrasonic: 2444
    Gyroscope: -420
    Ultrasonic: 45505
    Ultrasonic: 2395
    Ultrasonic: 2400
    Ultrasonic: 2449
    [...]
    Ultrasonic: 2449
    Ultrasonic: 2449
    Ultrasonic: 2444
    Gyroscope: -401
    Ultrasonic: 42497, 
    Ultrasonic: 2450, 
\end{verbatim}
    \end{minipage}
    \caption{Excerpt from a Log, showing the spike}
    \label{fig:log}
\end{figure}

\paragraph{Unknown path width}
Classification would be much simpler if path width was known. Three distance measurements would suffice ofr classification, one at 0, one at 90 and one at 180 Degrees.
A X Junction would have all three measurements larger than path width,
T Junction would have first and third measurement larger, second measurement equal to path width (technically more like half path width) and
a corridor would just have the second measurement greater than path width.
My first idea was to use the distance measurements at $45\deg$ and $135\deg$, where the corners would be expected for a X Junction, to estimate this variable.
This did not turn out to be a workable approach, as the ultrasonic sensor failed to get reliable readings for the distance, if the object is at too much of an angle.
% TODO: what solution?